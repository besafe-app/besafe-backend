{"swagger":"2.0","info":{"title":"Disease backend application","description":"This is a generated swagger json for your sails project","termsOfService":"","contact":{"name":"Tiago Drumond","url":"https://github.com/tiagodexter","email":"tiagodexter@gmail.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0.0"},"host":"besafe-backend.herokuapp.com","basePath":"/","schemes":["http","https"],"externalDocs":{"url":"https://github.com/coronaioasys/disease-backend"},"parameters":{"WhereQueryParam":{"in":"query","name":"where","required":false,"type":"string","description":"This follows the standard from http://sailsjs.com/documentation/reference/blueprint-api/find-where"},"LimitQueryParam":{"in":"query","name":"limit","required":false,"type":"integer","description":"The maximum number of records to send back (useful for pagination). Defaults to undefined"},"SkipQueryParam":{"in":"query","name":"skip","required":false,"type":"integer","description":"The number of records to skip (useful for pagination)."},"SortQueryParam":{"in":"query","name":"sort","required":false,"type":"string","description":"The sort order. By default, returned records are sorted by primary key value in ascending order. e.g. ?sort=lastName%20ASC"},"PopulateQueryParam":{"in":"query","name":"populate","required":false,"type":"string","description":"check for better understanding -> http://sailsjs.com/documentation/reference/blueprint-api/find-where"},"PageQueryParam":{"in":"query","name":"page","required":false,"type":"integer","description":"This helps with pagination and when the limit is known"},"SelectQueryParam":{"in":"query","name":"select","required":false,"type":"string","description":"This helps with what to return for the user and its \",\" delimited"},"TokenHeaderParam":{"in":"header","name":"token","required":false,"type":"string","description":"Incase we want to send header information along our request"},"IDPathParam":{"in":"path","name":"id","required":true,"type":"string","description":"This is to identify a particular object out"},"PerPageQueryParam":{"in":"query","name":"perPage","required":false,"type":"integer","description":"This helps with pagination and when the limit is known for pagify"}},"paths":{"/api/v1/users/check/{name}/{phone}":{"get":{"tag":["check-user"],"summary":"Check if user exists","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"User and phone found","schema":{"type":"object","properties":{"message":{"type":"string","example":"User already registred"}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"path","name":"name","required":true,"type":"string","description":"User nickname"},{"in":"path","name":"phone","required":true,"type":"string","description":"User phone (Ex: 17782222222 | 5531999999999)"}],"security":[{"Authorization":[]}]}},"/api/v1/users/create":{"post":{"tag":["first-step"],"summary":"Create first step for the user","consumes":["application/json"],"produces":["application/json"],"responses":{"201":{"description":"User created successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"name":{"type":"string","example":""},"phone":{"type":"string","example":"31923411284"},"nickname":{"type":"string","example":"Joseph"},"code":{"type":"int","example":123},"gender":{"type":"string","example":"male"},"token":{"type":"string","example":"token_common_user"},"activated":{"type":"boolean","example":true}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"name":{"type":"string"},"phone":{"type":"string"}}}],"security":[{"Authorization":[]}]}},"/api/v1/users/sms/{id}":{"get":{"tag":["send-sms"],"summary":"Send SMS for user by id","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"SMS sent successfully","schema":{"type":"object","properties":{"message":{"type":"string","example":"User already registred"}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"path","name":"id","required":true,"type":"string","description":"User id"}],"security":[{"Authorization":[]}]}},"/api/v1/users/validateCode":{"post":{"tag":["validate-sms"],"summary":"Validate Code for user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"SMS validate successfully","schema":{"type":"object","properties":{"token":{"type":"string","example":"token_common_user"}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"id":{"type":"integer"},"code":{"type":"integer"}}}],"security":[{"Authorization":[]}]}},"/api/v1/users/updateProfile":{"patch":{"tag":["update-profile"],"summary":"Update profile for user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Updated successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"name":{"type":"string","example":""},"phone":{"type":"string","example":"31923411284"},"nickname":{"type":"string","example":"Joseph"},"code":{"type":"int","example":123},"gender":{"type":"string","example":"male"},"token":{"type":"string","example":"token_common_user"},"activated":{"type":"boolean","example":true}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"name":{"type":"string"},"gender":{"type":"string"},"birthDate":{"type":"string"}}}]}},"/api/v1/web/conditions":{"post":{"tag":["conditions-create"],"summary":"Create condition","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition created successfully","schema":{"type":"object","properties":{"language":{"type":"string","example":"pt"},"createdAt":{"type":"int","example":1586723387394},"updatedAt":{"type":"int","example":1586723387394},"id":{"type":"int","example":""},"name":{"type":"string","example":123}}}},"400":{"description":"Missing parameters"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"name":{"type":"string"},"language":{"type":"string"}}}]},"get":{"tag":["conditions-get"],"summary":"Get all conditions","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition created successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"name":{"type":"string","example":"Febre"},"language":{"type":"string","example":"pt"},"createdAt":{"type":"string","example":1586293846607},"updatedAt":{"type":"string","example":1586366152316}}}},"400":{"description":"Missing parameters"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"query","name":"language","required":false,"type":"string","description":"Language of conditions"}]}},"/api/v1/web/conditions/updateCondition/{id}":{"post":{"tag":["conditions-update"],"summary":"Update condition","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition updated successfully","schema":{"type":"object","properties":{"language":{"type":"string","example":"pt"},"createdAt":{"type":"int","example":1586723387394},"updatedAt":{"type":"int","example":1586723387394},"id":{"type":"int","example":""},"name":{"type":"string","example":123}}}},"400":{"description":"Missing parameters"},"404":{"description":"Condition not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"name":{"type":"string"}}}]}},"/api/v1/web/conditions/deleteCondition/{id}":{"delete":{"tag":["conditions-delete"],"summary":"Delete condition","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition deleted successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"name":{"type":"string","example":"Febre"},"language":{"type":"string","example":"pt"},"createdAt":{"type":"string","example":1586293846607},"updatedAt":{"type":"string","example":1586366152316}}}},"400":{"description":"Missing parameters"},"404":{"description":"Condition not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":false,"type":"object","description":"Body content","properties":{"name":{"type":"string"}}}]}},"/api/v1/conditions":{"get":{"tag":["conditions-get"],"summary":"Get all conditions","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition created successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"name":{"type":"string","example":"Febre"},"language":{"type":"string","example":"pt"},"createdAt":{"type":"string","example":1586293846607},"updatedAt":{"type":"string","example":1586366152316}}}},"400":{"description":"Missing parameters"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"query","name":"language","required":false,"type":"string","description":"Language of conditions"}]}},"/api/v1/users/conditions":{"post":{"tag":["conditions-set"],"summary":"Set condition for user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition created successfully"},"400":{"description":"Missing parameters"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"conditions":{"type":"array","items":{"type":"number"}}}}]},"get":{"tag":["get-user-conditions"],"summary":"Get user conditions","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Conditions found","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"user":{"type":"int","example":0},"createdAt":{"type":"string","example":1586726020833},"updatedAt":{"type":"string","example":1586726020833},"condition":{"type":"object","properties":{"createdAt":{"type":"int","example":1586293846607},"updatedAt":{"type":"int","example":1586366152316},"id":{"type":"int","example":0},"name":{"type":"string","example":"Febre"}}}}}},"404":{"description":"Conditions not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"}],"security":[{"Authorization":[]}]}},"/api/v1/assesment":{"get":{"tag":["get-assessment"],"summary":"Get assessment questions","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Assessment found"},"404":{"description":"Assessment not found"},"500":{"description":"Internal server error"}}}},"/api/v1/assessment":{"post":{"tag":["assessment-create"],"summary":"Create assessment","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Assessment created successfully"},"400":{"description":"Missing parameters"},"500":{"description":"Internal server error"}},"parameters":[{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"name":{"type":"string"},"language":{"type":"string"}}}]}},"/api/v1/users/assessment":{"post":{"tag":["assessment-set"],"summary":"Set assessment for user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Assessment created successfully"},"400":{"description":"Missing parameters"},"500":{"description":"Internal server error"}},"parameters":[{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"assessment":{"type":"string"}}}]}},"/api/v1/users/assessments":{"get":{"tag":["get-user-assessments"],"summary":"Get user assessments","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Assessments found"},"404":{"description":"Assessments not found"},"500":{"description":"Internal server error"}}}},"/api/v1/users/auth":{"post":{"tag":["Users"],"summary":"Login for user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition created successfully","schema":{"type":"object","properties":{"active":{"type":"boolean","example":true},"createdAt":{"type":"int","example":1586371531741},"updatedAt":{"type":"int","example":1586371540704},"id":{"type":"int","example":0},"cpf":{"type":"string","example":"13058085241"},"email":{"type":"string","example":"example@example.com.br"},"password":{"type":"string","example":"****"},"phone":{"type":"string","example":"9312312123"},"nickname":{"type":"string","example":"joseph"},"code":{"type":"int","example":240638},"gender":{"type":"string","example":["male","female","other"]},"token":{"type":"string","example":"token_common_user"}}}},"400":{"description":"Missing parameters","type":"string"},"500":{"description":"Internal server error","type":"string"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"name":{"type":"string"},"phone":{"type":"string"}}}]}},"/api/v1/users/active/{id}":{"post":{"tag":["Users"],"summary":"Active User","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"User activated successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"nickname":{"type":"string","example":"José Alberto"},"activated":{"type":"boolean","example":true}}}},"400":{"description":"Missing parameters","type":"string"},"404":{"description":"User not found","type":"string"},"500":{"description":"Internal server error","type":"string"}},"parameters":[{"in":"path","name":"id","required":true,"type":"int","description":"User id"}]}},"/api/v1/users/deactive/{id}":{"post":{"tag":["Users"],"summary":"Deactive User","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"User deactivated successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"nickname":{"type":"string","example":"José Alberto"},"activated":{"type":"boolean","example":false}}}},"400":{"description":"Missing parameters","type":"string"},"404":{"description":"User not found","type":"string"},"500":{"description":"Internal server error","type":"string"}},"parameters":[{"in":"path","name":"id","required":true,"type":"int","description":"User id"}]}},"/api/v1/web/users/auth":{"post":{"tag":["Web Users"],"summary":"Login for web user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Condition created successfully","schema":{"type":"object","properties":{"cpf":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"name":{"type":"string"},"gender":{"type":"string","example":"female"},"birthdate":{"type":"date","example":""},"token":{"type":"string","example":"44wa4dw486w11aw6d1w"}}}},"400":{"description":"Missing parameters","type":"string"},"500":{"description":"Internal server error","type":"string"}},"parameters":[{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"data":{"type":"string"}}}]}},"/api/v1/web/users/create":{"post":{"tag":["create web users"],"summary":"Create web user","consumes":["application/json"],"produces":["application/json"],"responses":{"201":{"description":"User created successfully","schema":{"type":"object","properties":{"cpf":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"name":{"type":"string"},"gender":{"type":"string","example":"female"},"birthdate":{"type":"date","example":""},"token":{"type":"string","example":"44wa4dw486w11aw6d1w"}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"data":{"type":"string"}}}]}},"/api/v1/web/users":{"get":{"tag":["common users"],"summary":"Shows all common users","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Admin user found","schema":{"type":"object","properties":{"active":{"type":"boolean","example":true},"createdAt":{"type":"int","example":1586371531741},"updatedAt":{"type":"int","example":1586371540704},"id":{"type":"int","example":0},"name":{"type":"string","example":"José da Silva"},"phone":{"type":"string","example":"9312312123"},"nickname":{"type":"string","example":"joseph"},"code":{"type":"int","example":240638},"gender":{"type":"string","example":["male","female","other"]},"token":{"type":"string","example":"token_common_user"}}}},"400":{"description":"Missing arguments"},"500":{"description":"Internal server error"}}}},"/api/v1/web/getAdmin":{"get":{"tag":["common users"],"summary":"Shows all common users","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Users found","schema":{"type":"object","properties":{"active":{"type":"boolean","example":true},"createdAt":{"type":"int","example":1586371531741},"updatedAt":{"type":"int","example":1586371540704},"id":{"type":"int","example":0},"cpf":{"type":"string","example":"13058085241"},"email":{"type":"string","example":"example@example.com.br"},"password":{"type":"string","example":"****"},"phone":{"type":"string","example":"9312312123"},"nickname":{"type":"string","example":"joseph"},"code":{"type":"int","example":240638},"gender":{"type":"string","example":["male","female","other"]},"token":{"type":"string","example":"token_common_user"}}}},"404":{"description":"No common user has been registered"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"}]}},"/api/v1/web/users/recoveryGreenCard":{"post":{"tag":["recovery green card"],"summary":"Recovery password admin user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Admin user found","schema":{"type":"object","properties":{"success":{"type":"boolean","example":true}}}},"400":{"description":"Missing arguments"},"404":{"description":"Email not exists"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"email":{"type":"string","example":"aa@aa.com.br"},"tipo":{"type":"int","example":"1: send email code; 0: send sms code"}}}]}},"/api/v1/web/users/validateCode":{"post":{"tag":["validade web code"],"summary":"Recovery password admin user","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"Admin user found","schema":{"type":"object","properties":{"success":{"type":"boolean","example":true}}}},"400":{"description":"Missing arguments"},"403":{"description":"403 Forbidden"},"404":{"description":"Invalid Admin"},"500":{"description":"Internal server error"}},"parameters":[{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"email":{"type":"string"},"code":{"type":"string"}}}]}},"/api/v1/web/users/update":{"post":{"tag":["update web user"],"summary":"Update web user","consumes":["application/json"],"produces":["application/json"],"responses":{"201":{"description":"Admin User updated successfully","schema":{"type":"object","properties":{"active":{"type":"boolean","example":true},"createdAt":{"type":"int","example":1586371531741},"updatedAt":{"type":"int","example":1586371540704},"id":{"type":"int","example":0},"cpf":{"type":"string","example":"13058085241"},"email":{"type":"string","example":"example@example.com.br"},"password":{"type":"string","example":"****"},"phone":{"type":"string","example":"9312312123"},"nickname":{"type":"string","example":"joseph"},"code":{"type":"int","example":240638},"gender":{"type":"string","example":["male","female","other"]},"token":{"type":"string","example":"token_common_user"}}}},"400":{"description":"Missing parameters"},"404":{"description":"User and phone not found"},"500":{"description":"Internal server error"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"body","name":"data","required":true,"type":"object","description":"Body content","properties":{"data":{"type":"string"}}}]}},"/api/v1/web/users/active/{id}":{"post":{"tag":["Users"],"summary":"Active User","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"User activated successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"nickname":{"type":"string","example":"José Alberto"},"activated":{"type":"boolean","example":true}}}},"400":{"description":"Missing parameters","type":"string"},"404":{"description":"User not found","type":"string"},"500":{"description":"Internal server error","type":"string"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"path","name":"id","required":true,"type":"int","description":"User id"}]}},"/api/v1/web/users/deactive/{id}":{"post":{"tag":["Users"],"summary":"Deactive User","consumes":["application/json"],"produces":["application/json"],"responses":{"200":{"description":"User deactivated successfully","schema":{"type":"object","properties":{"id":{"type":"int","example":0},"nickname":{"type":"string","example":"José Alberto"},"activated":{"type":"boolean","example":false}}}},"400":{"description":"Missing parameters","type":"string"},"404":{"description":"User not found","type":"string"},"500":{"description":"Internal server error","type":"string"}},"parameters":[{"in":"header","name":"Authorization","required":true,"type":"string","description":"Bearer {token}"},{"in":"path","name":"id","required":true,"type":"int","description":"User id"}]}}},"definitions":{"adminusers":{"properties":{"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"id":{"type":"number","uniqueItems":true},"cpf":{"type":"string","uniqueItems":true},"email":{"type":"string"},"password":{"type":"string"},"phone":{"type":"string"},"name":{"type":"string"},"gender":{"type":"string","enum":["male","female","other"]},"birthdate":{"type":"ref"},"token":{"type":"string"},"code":{"type":"number"},"activated":{"type":"boolean","default":true}},"required":["cpf","email","password"]},"assessments":{"properties":{"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"id":{"type":"number","uniqueItems":true},"name":{"type":"string"},"language":{"type":"string"}},"required":["name","language"]},"conditions":{"properties":{"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"id":{"type":"number","uniqueItems":true},"name":{"type":"string"}},"required":["name"]},"userassessment":{"properties":{"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"id":{"type":"number","uniqueItems":true},"assessment":{},"user":{}},"required":["assessment","user"]},"userconditions":{"properties":{"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"id":{"type":"number","uniqueItems":true},"user":{},"condition":{}},"required":["user","condition"]},"users":{"properties":{"createdAt":{"type":"number"},"updatedAt":{"type":"number"},"id":{"type":"number","uniqueItems":true},"name":{"type":"string"},"phone":{"type":"string"},"nickname":{"type":"string"},"code":{"type":"number"},"gender":{"type":"string","enum":["male","female","other"]},"birthdate":{"type":"ref"},"token":{"type":"string"},"activated":{"type":"boolean","default":true}},"required":["phone","nickname"]},"archive":{"properties":{"id":{"type":"number","uniqueItems":true},"createdAt":{"type":"number"},"fromModel":{"type":"string"},"originalRecord":{"type":"json"},"originalRecordId":{"type":"json"}},"required":["fromModel","originalRecord"]}},"securityDefinitions":{"Authorization":{"type":"apiKey","description":"user JWT Auth Token","name":"token","in":"header","flow":"password"}}}